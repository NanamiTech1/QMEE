---
title: Data management and cleaning
author: Jonathan Dushoff
date: MMED 2018
---

## Goals

* Introduce some principles of data management

* Introduce some practical, modern tools 

* Show some examples

## Data analysis

Data must be:

* Organized

* Cleaned

* Manipulated

* Analyzed

The first three often take the most time, and this is often because researchers undervalue them.

There's never time to do it right ... but there's always time to do it over!

## Structured tools for dealing with data

* dplyr
* tidyr
* readr


```r
library(tidyverse)
```

```
## ── Attaching packages ────────────────────────────────── tidyverse 1.2.1 ──
```

```
## ✔ ggplot2 2.2.1     ✔ purrr   0.2.4
## ✔ tibble  1.4.2     ✔ dplyr   0.7.4
## ✔ tidyr   0.8.0     ✔ stringr 1.3.0
## ✔ readr   1.1.1     ✔ forcats 0.3.0
```

```
## ── Conflicts ───────────────────────────────────── tidyverse_conflicts() ──
## ✖ dplyr::filter() masks stats::filter()
## ✖ dplyr::lag()    masks stats::lag()
```

## A sample data set


```r
villageTable <- read_csv("~/gitroot/malariaImmunity/garki_data/village.csv")
```

```
## Parsed with column specification:
## cols(
##   area = col_character(),
##   village = col_integer(),
##   grid = col_character(),
##   fup = col_integer(),
##   vname = col_character(),
##   vu = col_character(),
##   grouped1 = col_integer(),
##   grouped2 = col_integer(),
##   scattered1 = col_integer(),
##   scattered2 = col_integer(),
##   population = col_integer()
## )
```

## A sample data set


```r
summary(villageTable)
```

```
##      area              village          grid                fup        
##  Length:180         Min.   :  1.0   Length:180         Min.   : 1.000  
##  Class :character   1st Qu.:211.2   Class :character   1st Qu.: 3.000  
##  Mode  :character   Median :362.5   Mode  :character   Median : 6.000  
##                     Mean   :402.0                      Mean   : 6.217  
##                     3rd Qu.:565.2                      3rd Qu.: 7.000  
##                     Max.   :967.0                      Max.   :92.000  
##     vname                vu               grouped1         grouped2      
##  Length:180         Length:180         Min.   :  0.00   Min.   : 0.0000  
##  Class :character   Class :character   1st Qu.:  0.00   1st Qu.: 0.0000  
##  Mode  :character   Mode  :character   Median : 24.50   Median : 0.0000  
##                                        Mean   : 37.06   Mean   : 0.7833  
##                                        3rd Qu.: 52.25   3rd Qu.: 1.0000  
##                                        Max.   :550.00   Max.   :10.0000  
##    scattered1       scattered2        population    
##  Min.   :  0.00   Min.   :0.00000   Min.   :   0.0  
##  1st Qu.:  0.00   1st Qu.:0.00000   1st Qu.: 124.0  
##  Median :  6.00   Median :0.00000   Median : 222.0  
##  Mean   : 14.29   Mean   :0.01111   Mean   : 287.1  
##  3rd Qu.: 22.00   3rd Qu.:0.00000   3rd Qu.: 375.0  
##  Max.   :117.00   Max.   :1.00000   Max.   :2556.0
```

## A sample data set


```r
parasiteTable <- read_csv("~/gitroot/malariaImmunity/garki_data/parademo.csv")
```

```
## Parsed with column specification:
## cols(
##   .default = col_integer(),
##   datecoll = col_date(format = ""),
##   datep = col_date(format = ""),
##   dateexam = col_date(format = "")
## )
```

```
## See spec(...) for full column specifications.
```

```
## Warning in rbind(names(probs), probs_f): number of columns of result is not
## a multiple of vector length (arg 1)
```

```
## Warning: 58129 parsing failures.
## row # A tibble: 5 x 5 col     row col      expected   actual     file                                expected   <int> <chr>    <chr>      <chr>      <chr>                               actual 1    96 datep    valid date 0000-00-00 '~/gitroot/malariaImmunity/garki_d… file 2    96 dateexam valid date 0000-00-00 '~/gitroot/malariaImmunity/garki_d… row 3   108 datep    valid date 0000-00-00 '~/gitroot/malariaImmunity/garki_d… col 4   108 dateexam valid date 0000-00-00 '~/gitroot/malariaImmunity/garki_d… expected 5   119 datep    valid date 0000-00-00 '~/gitroot/malariaImmunity/garki_d…
## ... ................. ... .......................................................................... ........ .......................................................................... ...... .......................................................................... .... .......................................................................... ... .......................................................................... ... .......................................................................... ........ ..........................................................................
## See problems(...) for more details.
```

## A sample data set


```r
summary(parasiteTable)
```

```
##        id           village         compound       survey     
##  Min.   :    1   Min.   : 51.0   Min.   :  1   Min.   : 1.00  
##  1st Qu.: 2671   1st Qu.:202.0   1st Qu.: 40   1st Qu.: 6.00  
##  Median : 6186   Median :220.0   Median :205   Median :10.00  
##  Mean   : 5980   Mean   :337.3   Mean   :176   Mean   :10.61  
##  3rd Qu.: 8993   3rd Qu.:552.0   3rd Qu.:249   3rd Qu.:15.00  
##  Max.   :12849   Max.   :806.0   Max.   :949   Max.   :23.00  
##                                                               
##      person            sch             _add           tribe        
##  Min.   : 1.000   Min.   :0.000   Min.   :1.000   Min.   :0.00000  
##  1st Qu.: 2.000   1st Qu.:1.000   1st Qu.:2.000   1st Qu.:0.00000  
##  Median : 5.000   Median :1.000   Median :2.000   Median :0.00000  
##  Mean   : 6.745   Mean   :1.189   Mean   :1.906   Mean   :0.08756  
##  3rd Qu.: 9.000   3rd Qu.:1.000   3rd Qu.:2.000   3rd Qu.:0.00000  
##  Max.   :99.000   Max.   :5.000   Max.   :2.000   Max.   :3.00000  
##                                                                    
##       hght            sleep             dist               baby      
##  Min.   :  0.00   Min.   :0.0000   Min.   :0.00e+00   Min.   :0.000  
##  1st Qu.:  0.00   1st Qu.:1.0000   1st Qu.:0.00e+00   1st Qu.:2.000  
##  Median :  0.00   Median :1.0000   Median :0.00e+00   Median :2.000  
##  Mean   : 15.33   Mean   :0.7863   Mean   :7.96e-05   Mean   :1.714  
##  3rd Qu.:  0.00   3rd Qu.:1.0000   3rd Qu.:0.00e+00   3rd Qu.:2.000  
##  Max.   :985.00   Max.   :2.0000   Max.   :2.00e+00   Max.   :2.000  
##                                                                      
##      alive             datecoll               coll         
##  Min.   :0.000000   Min.   :1970-10-26   Min.   :       0  
##  1st Qu.:0.000000   1st Qu.:1971-12-01   1st Qu.:       1  
##  Median :0.000000   Median :1972-10-11   Median :       1  
##  Mean   :0.005442   Mean   :1972-11-26   Mean   :     138  
##  3rd Qu.:0.000000   3rd Qu.:1973-08-29   3rd Qu.:       1  
##  Max.   :2.000000   Max.   :1976-12-10   Max.   :19000000  
##                     NA's   :7                              
##      sliden            car1           ncar1               car2      
##  Min.   :     0   Min.   :0.000   Min.   :    0.00   Min.   :0.000  
##  1st Qu.: 14967   1st Qu.:1.000   1st Qu.:    0.00   1st Qu.:1.000  
##  Median : 47182   Median :3.000   Median :    0.00   Median :3.000  
##  Mean   : 49504   Mean   :2.263   Mean   :   85.08   Mean   :2.298  
##  3rd Qu.: 81473   3rd Qu.:3.000   3rd Qu.:    0.00   3rd Qu.:3.000  
##  Max.   :117927   Max.   :3.000   Max.   :30000.00   Max.   :3.000  
##                                                                     
##      ncar2               filt           nfilt             fever      
##  Min.   :   0.000   Min.   :0.000   Min.   :0.0e+00   Min.   :0.000  
##  1st Qu.:   0.000   1st Qu.:1.000   1st Qu.:0.0e+00   1st Qu.:2.000  
##  Median :   0.000   Median :3.000   Median :0.0e+00   Median :2.000  
##  Mean   :   1.888   Mean   :2.279   Mean   :7.3e-02   Mean   :1.694  
##  3rd Qu.:   0.000   3rd Qu.:3.000   3rd Qu.:0.0e+00   3rd Qu.:2.000  
##  Max.   :4200.000   Max.   :3.000   Max.   :1.0e+04   Max.   :2.000  
##                                                                      
##      datep                micro           dateexam         
##  Min.   :1970-10-26   Min.   : 0.000   Min.   :1970-01-11  
##  1st Qu.:1971-11-16   1st Qu.: 5.000   1st Qu.:1971-09-29  
##  Median :1972-09-21   Median : 7.000   Median :1972-07-07  
##  Mean   :1972-11-13   Mean   : 7.226   Mean   :1972-07-03  
##  3rd Qu.:1973-08-16   3rd Qu.:10.000   3rd Qu.:1973-04-02  
##  Max.   :1976-01-31   Max.   :90.000   Max.   :1976-05-06  
##  NA's   :19703                         NA's   :38419       
##      slide             exam            pfa              pfg          
##  Min.   :     0   Min.   :  0.0   Min.   :  0.00   Min.   :  0.0000  
##  1st Qu.: 14967   1st Qu.:200.0   1st Qu.:  0.00   1st Qu.:  0.0000  
##  Median : 47182   Median :200.0   Median :  0.00   Median :  0.0000  
##  Mean   : 49504   Mean   :198.3   Mean   : 16.05   Mean   :  0.5428  
##  3rd Qu.: 81473   3rd Qu.:200.0   3rd Qu.:  3.00   3rd Qu.:  0.0000  
##  Max.   :117927   Max.   :462.0   Max.   :449.00   Max.   :392.0000  
##                                                                      
##        pm                po                ppfa             ppfg        
##  Min.   :  0.000   Min.   :  0.0000   Min.   :0.0000   Min.   :0.00000  
##  1st Qu.:  0.000   1st Qu.:  0.0000   1st Qu.:0.0000   1st Qu.:0.00000  
##  Median :  0.000   Median :  0.0000   Median :0.0000   Median :0.00000  
##  Mean   :  1.442   Mean   :  0.1589   Mean   :0.2982   Mean   :0.08759  
##  3rd Qu.:  0.000   3rd Qu.:  0.0000   3rd Qu.:1.0000   3rd Qu.:0.00000  
##  Max.   :400.000   Max.   :396.0000   Max.   :1.0000   Max.   :1.00000  
##                                                                         
##       ppm               ppo                 pf             smove        
##  Min.   :0.00000   Min.   :0.000000   Min.   :  0.00   Min.   :0.00000  
##  1st Qu.:0.00000   1st Qu.:0.000000   1st Qu.:  0.00   1st Qu.:0.00000  
##  Median :0.00000   Median :0.000000   Median :  0.00   Median :0.00000  
##  Mean   :0.09235   Mean   :0.009935   Mean   : 16.38   Mean   :0.00657  
##  3rd Qu.:0.00000   3rd Qu.:0.000000   3rd Qu.:  3.00   3rd Qu.:0.00000  
##  Max.   :1.00000   Max.   :1.000000   Max.   :449.00   Max.   :1.00000  
##                                                                         
##       agec        
##  Min.   :0.00000  
##  1st Qu.:0.00000  
##  Median :0.00000  
##  Mean   :0.00419  
##  3rd Qu.:0.00000  
##  Max.   :7.00000  
## 
```

## Entering, maintaining and using data

* These are different functions, and often call for different ways of formatting data

* This is why we have computers

## Data entry 

* Convenient for users

* Some amount of redundancy is good (to catch errors)

* Often a "wide" format (related information on the same row)

## Data use 

* Scanning for patterns and problems

* Making tables for publication

* Making data frames for statistical analysis

## Data maintenance

* Your database is
	* a logical construct
		* The core of the data that we maintain and validate
	* maybe also a software construct
		* If you are using a database program

* Data in the database is:
	* Non-redundant
	* Relational
	* Often in a "long" format (to signal values that are comparable)

## Redundancy

You don't want any redundancy in your database (although you might for entry or analysis)

* Removing redundancies is a great way to check data integrity

* Non-redundant information can be updated conveniently
	* and without introducing new errors
	* and without introducing inconsistencies

## Example


```r
head(parasiteTable)
```

```
## # A tibble: 6 x 39
##      id village compound survey person   sch `_add` tribe  hght sleep
##   <int>   <int>    <int>  <int>  <int> <int>  <int> <int> <int> <int>
## 1     1     801      401      1      1     1      1     1     0     1
## 2     1     801      401      2      1     1      2     0     0     1
## 3     1     801      401      3      1     1      2     0     0     1
## 4     1     801      401      4      1     1      2     0     0     1
## 5     1     801      401      5      1     1      2     0     0     1
## 6     1     801      401      6      1     1      2     0     0     1
## # ... with 29 more variables: dist <int>, baby <int>, alive <int>,
## #   datecoll <date>, coll <int>, sliden <int>, car1 <int>, ncar1 <int>,
## #   car2 <int>, ncar2 <int>, filt <int>, nfilt <int>, fever <int>,
## #   datep <date>, micro <int>, dateexam <date>, slide <int>, exam <int>,
## #   pfa <int>, pfg <int>, pm <int>, po <int>, ppfa <int>, ppfg <int>,
## #   ppm <int>, ppo <int>, pf <int>, smove <int>, agec <int>
```

## Tidy data

* No redundancy

* Break data into separate tables following the logic of the data

* Clear "keys" to describe the information in each row
	* Non-redundant, unique identifiers
	* Village table has village (number) as the key
	* Measurement table has id, survey as the key'

## Relational

Break data into logical tables

* Information at the level where it belongs:
	* Sampling event
	* Individual
	* Household
	* Village
	* Village group

## Tidy example




```r
print(sim)
```

```
##       time            S            I        R
## 1      0.0 390000.00000    100.00000 389900.0
## 2      0.1 389991.00000    108.00000 389901.0
## 3      0.2 389981.28022    116.63978 389902.1
## 4      0.3 389970.78315    125.97045 389903.2
## 5      0.4 389959.44666    136.04724 389904.5
## 6      0.5 389947.20368    146.92975 389905.9
## 7      0.6 389933.98179    158.68234 389907.3
## 8      0.7 389919.70280    171.37451 389908.9
## 9      0.8 389904.28227    185.08129 389910.6
## 10     0.9 389887.62904    199.88371 389912.5
## 11     1.0 389869.64469    215.86922 389914.5
## 12     1.1 389850.22295    233.13226 389916.6
## 13     1.2 389829.24911    251.77479 389919.0
## 14     1.3 389806.59930    271.90685 389921.5
## 15     1.4 389782.13982    293.64726 389924.2
## 16     1.5 389755.72633    317.12428 389927.1
## 17     1.6 389727.20302    342.47634 389930.3
## 18     1.7 389696.40171    369.85289 389933.7
## 19     1.8 389663.14086    399.41521 389937.4
## 20     1.9 389627.22454    431.33738 389941.4
## 21     2.0 389588.44128    465.80726 389945.8
## 22     2.1 389546.56287    503.02760 389950.4
## 23     2.2 389501.34302    543.21717 389955.4
## 24     2.3 389452.51599    586.61204 389960.9
## 25     2.4 389399.79502    633.46689 389966.7
## 26     2.5 389342.87074    684.05650 389973.1
## 27     2.6 389281.40939    738.67728 389979.9
## 28     2.7 389215.05093    797.64897 389987.3
## 29     2.8 389143.40701    861.31640 389995.3
## 30     2.9 389066.05879    930.05145 390003.9
## 31     3.0 388982.55461   1004.25512 390013.2
## 32     3.1 388892.40744   1084.35973 390023.2
## 33     3.2 388795.09223   1170.83135 390034.1
## 34     3.3 388690.04296   1264.17230 390045.8
## 35     3.4 388576.64961   1364.92393 390058.4
## 36     3.5 388454.25479   1473.66952 390072.1
## 37     3.6 388322.15020   1591.03741 390086.8
## 38     3.7 388179.57288   1717.70435 390102.7
## 39     3.8 388025.70109   1854.39910 390119.9
## 40     3.9 387859.65005   2001.90615 390138.4
## 41     4.0 387680.46730   2161.06984 390158.5
## 42     4.1 387487.12778   2332.79866 390180.1
## 43     4.2 387278.52868   2518.06978 390203.4
## 44     4.3 387053.48382   2717.93393 390228.6
## 45     4.4 386810.71787   2933.52055 390255.8
## 46     4.5 386548.86006   3166.04315 390285.1
## 47     4.6 386266.43766   3416.80512 390316.8
## 48     4.7 385961.86909   3687.20564 390350.9
## 49     4.8 385633.45661   3978.74607 390387.8
## 50     4.9 385279.37870   4293.03651 390427.6
## 51     5.0 384897.68214   4631.80271 390470.5
## 52     5.1 384486.27364   4996.89317 390516.8
## 53     5.2 384042.91130   5390.28659 390566.8
## 54     5.3 383565.19560   5814.09942 390620.7
## 55     5.4 383050.56033   6270.59370 390678.8
## 56     5.5 382496.26315   6762.18494 390741.6
## 57     5.6 381899.37612   7291.45012 390809.2
## 58     5.7 381256.77606   7861.13568 390882.1
## 59     5.8 380565.13501   8474.16538 390960.7
## 60     5.9 379820.91072   9133.64801 391045.4
## 61     6.0 379020.33753   9842.88472 391136.8
## 62     6.1 378159.41749  10605.37591 391235.2
## 63     6.2 377233.91224  11424.82741 391341.3
## 64     6.3 376239.33554  12305.15583 391455.5
## 65     6.4 375170.94701  13250.49280 391578.6
## 66     6.5 374023.74702  14265.18786 391711.1
## 67     6.6 372792.47341  15353.80960 391853.7
## 68     6.7 371471.60002  16521.14488 392007.3
## 69     6.8 370055.33784  17772.19562 392172.5
## 70     6.9 368537.63880  19112.17271 392350.2
## 71     7.0 366912.20303  20546.48675 392541.3
## 72     7.1 365172.48994  22080.73497 392746.8
## 73     7.2 363311.73372  23720.68384 392967.6
## 74     7.3 361322.96385  25472.24687 393204.8
## 75     7.4 359199.03129  27341.45696 393459.5
## 76     7.5 356932.64094  29334.43274 393732.9
## 77     7.6 354516.39097  31457.33839 394026.3
## 78     7.7 351942.81972  33716.33625 394340.8
## 79     7.8 349204.46069  36117.53192 394678.0
## 80     7.9 346293.90610  38666.91119 395039.2
## 81     8.0 343203.87939  41370.26879 395425.9
## 82     8.1 339927.31707  44233.12842 395839.6
## 83     8.2 336457.45968  47260.65452 396281.9
## 84     8.3 332787.95204  50457.55562 396754.5
## 85     8.4 328912.95206  53827.98004 397259.1
## 86     8.5 324827.24749  57375.40482 397797.3
## 87     8.6 320526.37945  61102.51880 398371.1
## 88     8.7 316006.77119  65011.10188 398982.1
## 89     8.8 311265.86002  69101.90203 399632.2
## 90     8.9 306302.23011  73374.51292 400323.3
## 91     9.0 301115.74312  77827.25478 401057.0
## 92     9.1 295707.66351  82457.06184 401835.3
## 93     9.2 290080.77464  87259.38009 402659.8
## 94     9.3 284239.48189  92228.07904 403532.4
## 95     9.4 278189.89849  97355.38165 404454.7
## 96     9.5 271939.90994 102631.81639 405428.3
## 97     9.6 265499.21296 108046.19520 406454.6
## 98     9.7 258879.32532 113585.62089 407535.1
## 99     9.8 252093.56326 119235.52674 408670.9
## 100    9.9 245156.98431 124979.75043 409863.3
## 101   10.0 238086.29383 130800.64340 411113.1
## 102   10.1 230899.71528 136679.21552 412421.1
## 103   10.2 223616.82483 142595.31381 413787.9
## 104   10.3 216258.35299 148527.83252 415213.8
## 105   10.4 208845.95658 154454.95060 416699.1
## 106   10.5 201401.96614 160354.39153 418243.6
## 107   10.6 193949.11466 166203.69909 419847.2
## 108   10.7 186510.25459 171980.52217 421509.2
## 109   10.8 179108.07052 177662.90102 423229.0
## 110   10.9 171764.79528 183229.54726 425005.7
## 111   11.0 164501.93704 188660.11002 426838.0
## 112   11.1 157340.02469 193935.42127 428724.6
## 113   11.2 150298.37762 199037.71413 430663.9
## 114   11.3 143394.90557 203950.80903 432654.3
## 115   11.4 136645.94242 208660.26409 434693.8
## 116   11.5 130066.11663 213153.48725 436780.4
## 117   11.6 123668.25978 217419.80922 438911.9
## 118   11.7 117463.35299 221450.51792 441086.1
## 119   11.8 111460.50983 225238.85590 443300.6
## 120   11.9 105666.99343 228779.98374 445553.0
## 121   12.0 100088.26427 232070.91306 447840.8
## 122   12.1  94728.05468 235110.41352 450161.5
## 123   12.2  89588.46573 237898.89833 452512.6
## 124   12.3  84670.08174 240438.29334 454891.6
## 125   12.4  79972.09791 242731.89424 457296.0
## 126   12.5  75492.45664 244784.21657 459723.3
## 127   12.6  71227.98852 246600.84252 462171.2
## 128   12.7  67174.55422 248188.26840 464637.2
## 129   12.8  63327.18431 249553.75563 467119.1
## 130   12.9  59680.21430 250705.18807 469614.6
## 131   13.0  56227.41291 251650.93758 472121.6
## 132   13.1  52962.10187 252399.73925 474638.2
## 133   13.2  49877.26633 252960.57740 477162.2
## 134   13.3  46965.65508 253342.58288 479691.8
## 135   13.4  44219.87038 253554.94175 482225.2
## 136   13.5  41632.44730 253606.81541 484760.7
## 137   13.6  39195.92291 253507.27165 487296.8
## 138   13.7  36902.89564 253265.22620 489831.9
## 139   13.8  34746.07559 252889.39398 492364.5
## 140   13.9  32718.32621 252388.24943 494893.4
## 141   14.0  30812.69827 251769.99487 497417.3
## 142   14.1  29022.45683 251042.53636 499935.0
## 143   14.2  27341.10195 250213.46588 502445.4
## 144   14.3  25762.38382 249290.04935 504947.6
## 145   14.4  24280.31322 248279.21946 507440.5
## 146   14.5  22889.16771 247187.57277 509923.3
## 147   14.6  21583.49437 246021.37039 512395.1
## 148   14.7  20358.10955 244786.54150 514855.3
## 149   14.8  19208.09619 243488.68944 517303.2
## 150   14.9  18128.79908 242133.09966 519738.1
## 151   15.0  17115.81854 240724.74920 522159.4
## 152   15.1  16165.00290 239268.31735 524566.7
## 153   15.2  15272.43989 237768.19719 526959.4
## 154   15.3  14434.44747 236228.50764 529337.0
## 155   15.4  13647.56409 234653.10595 531699.3
## 156   15.5  12908.53871 233045.60026 534045.9
## 157   15.6  12214.32067 231409.36230 536376.3
## 158   15.7  11562.04956 229747.53979 538690.4
## 159   15.8  10949.04515 228063.06880 540987.9
## 160   15.9  10372.79757 226358.68569 543268.5
## 161   16.0   9830.95769 224636.93871 545532.1
## 162   16.1   9321.32779 222900.19923 547778.5
## 163   16.2   8841.85260 221150.67242 550007.5
## 164   16.3   8390.61068 219390.40762 552219.0
## 165   16.4   7965.80618 217621.30804 554412.9
## 166   16.5   7565.76099 215845.14015 556589.1
## 167   16.6   7188.90728 214063.54246 558747.6
## 168   16.7   6833.78044 212278.03387 560888.2
## 169   16.8   6499.01241 210490.02157 563011.0
## 170   16.9   6183.32535 208700.80841 565115.9
## 171   17.0   5885.52573 206911.59994 567202.9
## 172   17.1   5604.49876 205123.51092 569272.0
## 173   17.2   5339.20312 203337.57145 571323.2
## 174   17.3   5088.66606 201554.73280 573356.6
## 175   17.4   4851.97881 199775.87272 575372.1
## 176   17.5   4628.29228 198001.80052 577369.9
## 177   17.6   4416.81300 196233.26179 579349.9
## 178   17.7   4216.79940 194470.94278 581312.3
## 179   17.8   4027.55825 192715.47449 583257.0
## 180   17.9   3848.44145 190967.43655 585184.1
## 181   18.0   3678.84292 189227.36072 587093.8
## 182   18.1   3518.19575 187495.73429 588986.1
## 183   18.2   3365.96959 185773.00310 590861.0
## 184   18.3   3221.66814 184059.57452 592718.8
## 185   18.4   3084.82686 182355.82005 594559.4
## 186   18.5   2955.01083 180662.07788 596382.9
## 187   18.6   2831.81274 178978.65519 598189.5
## 188   18.7   2714.85104 177305.83034 599979.3
## 189   18.8   2603.76821 175643.85487 601752.4
## 190   18.9   2498.22916 173992.95537 603508.8
## 191   19.0   2397.91971 172353.33526 605248.7
## 192   19.1   2302.54522 170725.17640 606972.3
## 193   19.2   2211.82927 169108.64058 608679.5
## 194   19.3   2125.51248 167503.87097 610370.6
## 195   19.4   2043.35135 165910.99339 612045.7
## 196   19.5   1965.11724 164330.11757 613704.8
## 197   19.6   1890.59541 162761.33822 615348.1
## 198   19.7   1819.58406 161204.73619 616975.7
## 199   19.8   1751.89355 159660.37934 618587.7
## 200   19.9   1687.34555 158128.32355 620184.3
## 201   20.0   1625.77237 156608.61349 621765.6
## 202   20.1   1567.01622 155101.28350 623331.7
## 203   20.2   1510.92863 153606.35826 624882.7
## 204   20.3   1457.36981 152123.85350 626418.8
## 205   20.4   1406.20810 150653.77667 627940.0
## 206   20.5   1357.31951 149196.12749 629446.6
## 207   20.6   1310.58717 147750.89856 630938.5
## 208   20.7   1265.90092 146318.07583 632416.0
## 209   20.8   1223.15687 144897.63911 633879.2
## 210   20.9   1182.25706 143489.56254 635328.2
## 211   21.0   1143.10901 142093.81496 636763.1
## 212   21.1   1105.62546 140710.36036 638184.0
## 213   21.2   1069.72401 139339.15821 639591.1
## 214   21.3   1035.32683 137980.16381 640984.5
## 215   21.4   1002.36039 136633.32861 642364.3
## 216   21.5    970.75520 135298.60052 643730.6
## 217   21.6    940.44554 133975.92416 645083.6
## 218   21.7    911.36930 132665.24117 646423.4
## 219   21.8    883.46768 131366.49038 647750.0
## 220   21.9    856.68505 130079.60810 649063.7
## 221   22.0    830.96876 128804.52831 650364.5
## 222   22.1    806.26894 127541.18284 651652.5
## 223   22.2    782.53837 126289.50159 652928.0
## 224   22.3    759.73228 125049.41266 654190.9
## 225   22.4    737.80826 123820.84255 655441.3
## 226   22.5    716.72610 122603.71629 656679.6
## 227   22.6    696.44765 121397.95758 657905.6
## 228   22.7    676.93673 120203.48892 659119.6
## 229   22.8    658.15900 119020.23176 660321.6
## 230   22.9    640.08187 117848.10657 661511.8
## 231   23.0    622.67438 116687.03299 662690.3
## 232   23.1    605.90715 115536.92990 663857.2
## 233   23.2    589.75223 114397.71552 665012.5
## 234   23.3    574.18308 113269.30751 666156.5
## 235   23.4    559.17447 112151.62305 667289.2
## 236   23.5    544.70239 111044.57889 668410.7
## 237   23.6    530.74403 109948.09147 669521.2
## 238   23.7    517.27765 108862.07693 670620.6
## 239   23.8    504.28259 107786.45122 671709.3
## 240   23.9    491.73917 106721.13013 672787.1
## 241   24.0    479.62864 105666.02936 673854.3
## 242   24.1    467.93315 104621.06455 674911.0
## 243   24.2    456.63569 103586.15137 675957.2
## 244   24.3    445.72005 102561.20550 676993.1
## 245   24.4    435.17076 101546.14274 678018.7
## 246   24.5    424.97308 100540.87898 679034.1
## 247   24.6    415.11297  99545.33031 680039.6
## 248   24.7    405.57699  98559.41298 681035.0
## 249   24.8    396.35236  97583.04349 682020.6
## 250   24.9    387.42683  96616.13858 682996.4
## 251   25.0    378.78875  95658.61527 683962.6
## 252   25.1    370.42697  94710.39090 684919.2
## 253   25.2    362.33082  93771.38314 685866.3
## 254   25.3    354.49015  92841.50998 686804.0
## 255   25.4    346.89521  91920.68982 687732.4
## 256   25.5    339.53671  91008.84143 688651.6
## 257   25.6    332.40574  90105.88398 689561.7
## 258   25.7    325.49381  89211.73707 690462.8
## 259   25.8    318.79276  88326.32075 691354.9
## 260   25.9    312.29481  87449.55549 692238.1
## 261   26.0    305.99249  86581.36225 693112.6
## 262   26.1    299.87867  85721.66246 693978.5
## 263   26.2    293.94649  84870.37801 694835.7
## 264   26.3    288.18941  84027.43131 695684.4
## 265   26.4    282.60114  83192.74526 696524.7
## 266   26.5    277.17568  82366.24328 697356.6
## 267   26.6    271.90723  81547.84929 698180.2
## 268   26.7    266.79028  80737.48774 698995.7
## 269   26.8    261.81952  79935.08363 699803.1
## 270   26.9    256.98985  79140.56246 700602.4
## 271   27.0    252.29639  78353.85030 701393.9
## 272   27.1    247.73445  77574.87373 702177.4
## 273   27.2    243.29954  76803.55991 702953.1
## 274   27.3    238.98732  76039.83653 703721.2
## 275   27.4    234.79365  75283.63183 704481.6
## 276   27.5    230.71455  74534.87461 705234.4
## 277   27.6    226.74618  73793.49424 705979.8
## 278   27.7    222.88486  73059.42062 706717.7
## 279   27.8    219.12705  72332.58422 707448.3
## 280   27.9    215.46935  71612.91608 708171.6
## 281   28.0    211.90849  70900.34778 708887.7
## 282   28.1    208.44132  70194.81146 709596.7
## 283   28.2    205.06482  69496.23985 710298.7
## 284   28.3    201.77608  68804.56620 710993.7
## 285   28.4    198.57228  68119.72433 711681.7
## 286   28.5    195.45074  67441.64863 712362.9
## 287   28.6    192.40885  66770.27404 713037.3
## 288   28.7    189.44411  66105.53603 713705.0
## 289   28.8    186.55412  65447.37066 714366.1
## 290   28.9    183.73655  64795.71453 715020.5
## 291   29.0    180.98916  64150.50477 715668.5
## 292   29.1    178.30980  63511.67908 716310.0
## 293   29.2    175.69640  62879.17569 716945.1
## 294   29.3    173.14694  62252.93339 717573.9
## 295   29.4    170.65950  61632.89150 718196.4
## 296   29.5    168.23222  61018.98987 718812.8
## 297   29.6    165.86329  60411.16890 719423.0
## 298   29.7    163.55098  59809.36952 720027.1
## 299   29.8    161.29362  59213.53318 720625.2
## 300   29.9    159.08960  58623.60187 721217.3
## 301   30.0    156.93735  58039.51810 721803.5
## 302   30.1    154.83538  57461.22490 722383.9
## 303   30.2    152.78222  56888.66581 722958.6
## 304   30.3    150.77647  56321.78490 723527.4
## 305   30.4    148.81678  55760.52674 724090.7
## 306   30.5    146.90183  55204.83642 724648.3
## 307   30.6    145.03036  54654.65952 725200.3
## 308   30.7    143.20115  54109.94214 725746.9
## 309   30.8    141.41301  53570.63086 726288.0
## 310   30.9    139.66480  53036.67276 726823.7
## 311   31.0    137.95541  52508.01542 727354.0
## 312   31.1    136.28377  51984.60691 727879.1
## 313   31.2    134.64885  51466.39576 728399.0
## 314   31.3    133.04964  50953.33101 728913.6
## 315   31.4    131.48518  50445.36216 729423.2
## 316   31.5    129.95453  49942.43919 729927.6
## 317   31.6    128.45679  49444.51254 730427.0
## 318   31.7    126.99106  48951.53314 730921.5
## 319   31.8    125.55650  48463.45237 731411.0
## 320   31.9    124.15229  47980.22205 731895.6
## 321   32.0    122.77764  47501.79449 732375.4
## 322   32.1    121.43175  47028.12243 732850.4
## 323   32.2    120.11390  46559.15906 733320.7
## 324   32.3    118.82334  46094.85802 733786.3
## 325   32.4    117.55939  45635.17340 734247.3
## 326   32.5    116.32135  45180.05971 734703.6
## 327   32.6    115.10856  44729.47190 735155.4
## 328   32.7    113.92039  44283.36535 735602.7
## 329   32.8    112.75621  43841.69587 736045.5
## 330   32.9    111.61542  43404.41971 736484.0
## 331   33.0    110.49743  42971.49349 736918.0
## 332   33.1    109.40169  42542.87431 737347.7
## 333   33.2    108.32763  42118.51962 737773.2
## 334   33.3    107.27472  41698.38734 738194.3
## 335   33.4    106.24245  41282.43574 738611.3
## 336   33.5    105.23030  40870.62352 739024.1
## 337   33.6    104.23780  40462.90978 739432.9
## 338   33.7    103.26447  40059.25402 739837.5
## 339   33.8    102.30985  39659.61610 740238.1
## 340   33.9    101.37349  39263.95630 740634.7
## 341   34.0    100.45495  38872.23527 741027.3
## 342   34.1     99.55382  38484.41405 741416.0
## 343   34.2     98.66968  38100.45405 741800.9
## 344   34.3     97.80214  37720.31706 742181.9
## 345   34.4     96.95080  37343.96522 742559.1
## 346   34.5     96.11529  36971.36108 742932.5
## 347   34.6     95.29525  36602.46751 743302.2
## 348   34.7     94.49032  36237.24776 743668.3
## 349   34.8     93.70015  35875.66546 744030.6
## 350   34.9     92.92441  35517.68455 744389.4
## 351   35.0     92.16276  35163.26934 744744.6
## 352   35.1     91.41490  34812.38451 745096.2
## 353   35.2     90.68050  34464.99506 745444.3
## 354   35.3     89.95928  34121.06634 745789.0
## 355   35.4     89.25093  33780.56402 746130.2
## 356   35.5     88.55518  33443.45414 746468.0
## 357   35.6     87.87173  33109.70304 746802.4
## 358   35.7     87.20033  32779.27741 747133.5
## 359   35.8     86.54071  32452.14426 747461.3
## 360   35.9     85.89261  32128.27092 747785.8
## 361   36.0     85.25578  31807.62503 748107.1
## 362   36.1     84.62999  31490.17458 748425.2
## 363   36.2     84.01498  31175.88784 748740.1
## 364   36.3     83.41054  30864.73340 749051.9
## 365   36.4     82.81644  30556.68017 749360.5
## 366   36.5     82.23246  30251.69735 749666.1
## 367   36.6     81.65838  29949.75445 749968.6
## 368   36.7     81.09400  29650.82129 750268.1
## 369   36.8     80.53911  29354.86796 750564.6
## 370   36.9     79.99352  29061.86487 750858.1
## 371   37.0     79.45704  28771.78271 751148.8
## 372   37.1     78.92947  28484.59244 751436.5
## 373   37.2     78.41064  28200.26535 751721.3
## 374   37.3     77.90036  27918.77298 752003.3
## 375   37.4     77.39847  27640.08714 752282.5
## 376   37.5     76.90478  27364.17996 752558.9
## 377   37.6     76.41914  27091.02380 752832.6
## 378   37.7     75.94139  26820.59131 753103.5
## 379   37.8     75.47136  26552.85543 753371.7
## 380   37.9     75.00890  26287.78933 753637.2
## 381   38.0     74.55387  26025.36647 753900.1
## 382   38.1     74.10611  25765.56057 754160.3
## 383   38.2     73.66548  25508.34559 754418.0
## 384   38.3     73.23185  25253.69577 754673.1
## 385   38.4     72.80507  25001.58559 754925.6
## 386   38.5     72.38501  24751.98979 755175.6
## 387   38.6     71.97155  24504.88335 755423.1
## 388   38.7     71.56455  24260.24152 755668.2
## 389   38.8     71.16390  24018.03976 755910.8
## 390   38.9     70.76946  23778.25380 756151.0
## 391   39.0     70.38113  23540.85959 756388.8
## 392   39.1     69.99878  23305.83334 756624.2
## 393   39.2     69.62231  23073.15148 756857.2
## 394   39.3     69.25160  22842.79067 757088.0
## 395   39.4     68.88655  22614.72782 757316.4
## 396   39.5     68.52704  22388.94005 757542.5
## 397   39.6     68.17299  22165.40470 757766.4
## 398   39.7     67.82428  21944.09937 757988.1
## 399   39.8     67.48081  21725.00184 758207.5
## 400   39.9     67.14250  21508.09013 758424.8
## 401   40.0     66.80924  21293.34249 758639.8
## 402   40.1     66.48095  21080.73735 758852.8
## 403   40.2     66.15754  20870.25339 759063.6
## 404   40.3     65.83891  20661.86949 759272.3
## 405   40.4     65.52498  20455.56472 759478.9
## 406   40.5     65.21567  20251.31839 759683.5
## 407   40.6     64.91089  20049.10998 759886.0
## 408   40.7     64.61057  19848.91920 760086.5
## 409   40.8     64.31462  19650.72596 760285.0
## 410   40.9     64.02296  19454.51036 760481.5
## 411   41.0     63.73553  19260.25268 760676.0
## 412   41.1     63.45225  19067.93344 760868.6
## 413   41.2     63.17304  18877.53331 761059.3
## 414   41.3     62.89784  18689.03318 761248.1
## 415   41.4     62.62657  18502.41412 761435.0
## 416   41.5     62.35917  18317.65738 761620.0
## 417   41.6     62.09556  18134.74441 761803.2
## 418   41.7     61.83570  17953.65683 761984.5
## 419   41.8     61.57950  17774.37646 762164.0
## 420   41.9     61.32692  17596.88528 762341.8
## 421   42.0     61.07788  17421.16547 762517.8
## 422   42.1     60.83233  17247.19936 762692.0
## 423   42.2     60.59021  17074.96949 762864.4
## 424   42.3     60.35146  16904.45854 763035.2
## 425   42.4     60.11603  16735.64939 763204.2
## 426   42.5     59.88386  16568.52507 763371.6
## 427   42.6     59.65489  16403.06878 763537.3
## 428   42.7     59.42908  16239.26391 763701.3
## 429   42.8     59.20637  16077.09398 763863.7
## 430   42.9     58.98670  15916.54270 764024.5
## 431   43.0     58.77004  15757.59394 764183.6
## 432   43.1     58.55633  15600.23171 764341.2
## 433   43.2     58.34553  15444.44019 764497.2
## 434   43.3     58.13758  15290.20374 764651.7
## 435   43.4     57.93244  15137.50684 764804.6
## 436   43.5     57.73007  14986.33415 764955.9
## 437   43.6     57.53041  14836.67046 765105.8
## 438   43.7     57.33344  14688.50073 765254.2
## 439   43.8     57.13910  14541.81006 765401.1
## 440   43.9     56.94735  14396.58371 765546.5
## 441   44.0     56.75815  14252.80707 765690.4
## 442   44.1     56.57147  14110.46568 765833.0
## 443   44.2     56.38726  13969.54524 765974.1
## 444   44.3     56.20548  13830.03156 766113.8
## 445   44.4     56.02610  13691.91063 766252.1
## 446   44.5     55.84907  13555.16855 766389.0
## 447   44.6     55.67437  13419.79156 766524.5
## 448   44.7     55.50196  13285.76606 766658.7
## 449   44.8     55.33179  13153.07857 766791.6
## 450   44.9     55.16384  13021.71573 766923.1
## 451   45.0     54.99807  12891.66434 767053.3
## 452   45.1     54.83445  12762.91132 767182.3
## 453   45.2     54.67295  12635.44371 767309.9
## 454   45.3     54.51353  12509.24869 767436.2
## 455   45.4     54.35616  12384.31357 767561.3
## 456   45.5     54.20082  12260.62578 767685.2
## 457   45.6     54.04746  12138.17288 767807.8
## 458   45.7     53.89607  12016.94254 767929.2
## 459   45.8     53.74661  11896.92258 768049.3
## 460   45.9     53.59905  11778.10091 768168.3
## 461   46.0     53.45337  11660.46559 768286.1
## 462   46.1     53.30953  11544.00477 768402.7
## 463   46.2     53.16751  11428.70674 768518.1
## 464   46.3     53.02729  11314.55989 768632.4
## 465   46.4     52.88883  11201.55275 768745.6
## 466   46.5     52.75212  11089.67394 768857.6
## 467   46.6     52.61712  10978.91220 768968.5
## 468   46.7     52.48381  10869.25639 769078.3
## 469   46.8     52.35216  10760.69547 769187.0
## 470   46.9     52.22216  10653.21852 769294.6
## 471   47.0     52.09377  10546.81472 769401.1
## 472   47.1     51.96698  10441.47336 769506.6
## 473   47.2     51.84176  10337.18384 769611.0
## 474   47.3     51.71810  10233.93568 769714.3
## 475   47.4     51.59595  10131.71846 769816.7
## 476   47.5     51.47532  10030.52191 769918.0
## 477   47.6     51.35617   9930.33584 770018.3
## 478   47.7     51.23848   9831.15017 770117.6
## 479   47.8     51.12223   9732.95492 770215.9
## 480   47.9     51.00741   9635.74019 770313.3
## 481   48.0     50.89399   9539.49621 770409.6
## 482   48.1     50.78195   9444.21329 770505.0
## 483   48.2     50.67127   9349.88183 770599.4
## 484   48.3     50.56194   9256.49235 770692.9
## 485   48.4     50.45393   9164.03543 770785.5
## 486   48.5     50.34724   9072.50177 770877.2
## 487   48.6     50.24183   8981.88217 770967.9
## 488   48.7     50.13769   8892.16748 771057.7
## 489   48.8     50.03480   8803.34869 771146.6
## 490   48.9     49.93315   8715.41685 771234.6
## 491   49.0     49.83273   8628.36311 771321.8
## 492   49.1     49.73350   8542.17871 771408.1
## 493   49.2     49.63546   8456.85496 771493.5
## 494   49.3     49.53860   8372.38328 771578.1
## 495   49.4     49.44288   8288.75516 771661.8
## 496   49.5     49.34831   8205.96218 771744.7
## 497   49.6     49.25486   8123.99601 771826.7
## 498   49.7     49.16252   8042.84839 771908.0
## 499   49.8     49.07127   7962.51115 771988.4
## 500   49.9     48.98110   7882.97621 772068.0
## 501   50.0     48.89200   7804.23555 772146.9
## 502   50.1     48.80394   7726.28125 772224.9
## 503   50.2     48.71693   7649.10545 772302.2
## 504   50.3     48.63093   7572.70039 772378.7
## 505   50.4     48.54595   7497.05837 772454.4
## 506   50.5     48.46196   7422.17178 772529.4
## 507   50.6     48.37895   7348.03307 772603.6
## 508   50.7     48.29692   7274.63477 772677.1
## 509   50.8     48.21584   7201.96950 772749.8
## 510   50.9     48.13570   7130.02994 772821.8
## 511   51.0     48.05650   7058.80885 772893.1
## 512   51.1     47.97822   6988.29904 772963.7
## 513   51.2     47.90085   6918.49342 773033.6
## 514   51.3     47.82437   6849.38497 773102.8
## 515   51.4     47.74878   6780.96671 773171.3
## 516   51.5     47.67406   6713.23176 773239.1
## 517   51.6     47.60020   6646.17330 773306.2
## 518   51.7     47.52719   6579.78457 773372.7
## 519   51.8     47.45503   6514.05889 773438.5
## 520   51.9     47.38369   6448.98964 773503.6
## 521   52.0     47.31317   6384.57026 773568.1
## 522   52.1     47.24346   6320.79427 773632.0
## 523   52.2     47.17455   6257.65524 773695.2
## 524   52.3     47.10643   6195.14681 773757.7
## 525   52.4     47.03908   6133.26269 773819.7
## 526   52.5     46.97251   6071.99664 773881.0
## 527   52.6     46.90669   6011.34249 773941.8
## 528   52.7     46.84162   5951.29414 774001.9
## 529   52.8     46.77729   5891.84552 774061.4
## 530   52.9     46.71368   5832.99067 774120.3
## 531   53.0     46.65080   5774.72364 774178.6
## 532   53.1     46.58864   5717.03858 774236.4
## 533   53.2     46.52717   5659.92966 774293.5
## 534   53.3     46.46640   5603.39113 774350.1
## 535   53.4     46.40631   5547.41730 774406.2
## 536   53.5     46.34691   5492.00254 774461.7
## 537   53.6     46.28817   5437.14125 774516.6
## 538   53.7     46.23009   5382.82792 774570.9
## 539   53.8     46.17266   5329.05707 774624.8
## 540   53.9     46.11588   5275.82328 774678.1
## 541   54.0     46.05973   5223.12119 774730.8
## 542   54.1     46.00422   5170.94550 774783.1
## 543   54.2     45.94932   5119.29094 774834.8
## 544   54.3     45.89504   5068.15231 774886.0
## 545   54.4     45.84136   5017.52447 774936.6
## 546   54.5     45.78828   4967.40230 774986.8
## 547   54.6     45.73579   4917.78077 775036.5
## 548   54.7     45.68389   4868.65486 775085.7
## 549   54.8     45.63256   4820.01964 775134.3
## 550   54.9     45.58180   4771.87020 775182.5
## 551   55.0     45.53161   4724.20170 775230.3
## 552   55.1     45.48197   4677.00932 775277.5
## 553   55.2     45.43288   4630.28831 775324.3
## 554   55.3     45.38433   4584.03398 775370.6
## 555   55.4     45.33632   4538.24165 775416.4
## 556   55.5     45.28884   4492.90671 775461.8
## 557   55.6     45.24189   4448.02460 775506.7
## 558   55.7     45.19545   4403.59079 775551.2
## 559   55.8     45.14952   4359.60081 775595.2
## 560   55.9     45.10410   4316.05023 775638.8
## 561   56.0     45.05917   4272.93465 775682.0
## 562   56.1     45.01474   4230.24974 775724.7
## 563   56.2     44.97080   4187.99118 775767.0
## 564   56.3     44.92733   4146.15473 775808.9
## 565   56.4     44.88435   4104.73617 775850.4
## 566   56.5     44.84183   4063.73133 775891.4
## 567   56.6     44.79978   4023.13607 775932.1
## 568   56.7     44.75819   3982.94630 775972.3
## 569   56.8     44.71705   3943.15797 776012.1
## 570   56.9     44.67636   3903.76708 776051.6
## 571   57.0     44.63611   3864.76966 776090.6
## 572   57.1     44.59630   3826.16177 776129.2
## 573   57.2     44.55692   3787.93953 776167.5
## 574   57.3     44.51797   3750.09909 776205.4
## 575   57.4     44.47945   3712.63662 776242.9
## 576   57.5     44.44134   3675.54836 776280.0
## 577   57.6     44.40364   3638.83058 776316.8
## 578   57.7     44.36636   3602.47956 776353.2
## 579   57.8     44.32947   3566.49165 776389.2
## 580   57.9     44.29299   3530.86321 776424.8
## 581   58.0     44.25690   3495.59067 776460.2
## 582   58.1     44.22120   3460.67047 776495.1
## 583   58.2     44.18588   3426.09908 776529.7
## 584   58.3     44.15095   3391.87302 776564.0
## 585   58.4     44.11639   3357.98885 776597.9
## 586   58.5     44.08220   3324.44315 776631.5
## 587   58.6     44.04838   3291.23254 776664.7
## 588   58.7     44.01493   3258.35367 776697.6
## 589   58.8     43.98183   3225.80323 776730.2
## 590   58.9     43.94909   3193.57793 776762.5
## 591   59.0     43.91670   3161.67454 776794.4
## 592   59.1     43.88466   3130.08984 776826.0
## 593   59.2     43.85296   3098.82064 776857.3
## 594   59.3     43.82160   3067.86380 776888.3
## 595   59.4     43.79057   3037.21618 776919.0
## 596   59.5     43.75988   3006.87471 776949.4
## 597   59.6     43.72952   2976.83633 776979.4
## 598   59.7     43.69948   2947.09801 777009.2
## 599   59.8     43.66976   2917.65675 777038.7
## 600   59.9     43.64035   2888.50958 777067.9
## 601   60.0     43.61126   2859.65358 777096.7
## 602   60.1     43.58248   2831.08582 777125.3
## 603   60.2     43.55401   2802.80344 777153.6
## 604   60.3     43.52584   2774.80357 777181.7
## 605   60.4     43.49797   2747.08341 777209.4
## 606   60.5     43.47039   2719.64015 777236.9
## 607   60.6     43.44311   2692.47103 777264.1
## 608   60.7     43.41612   2665.57331 777291.0
## 609   60.8     43.38941   2638.94429 777317.7
## 610   60.9     43.36299   2612.58127 777344.1
## 611   61.0     43.33684   2586.48160 777370.2
## 612   61.1     43.31098   2560.64265 777396.0
## 613   61.2     43.28538   2535.06182 777421.7
## 614   61.3     43.26006   2509.73652 777447.0
## 615   61.4     43.23500   2484.66421 777472.1
## 616   61.5     43.21021   2459.84236 777496.9
## 617   61.6     43.18569   2435.26846 777521.5
## 618   61.7     43.16142   2410.94005 777545.9
## 619   61.8     43.13740   2386.85466 777570.0
## 620   61.9     43.11364   2363.00988 777593.9
## 621   62.0     43.09013   2339.40329 777617.5
## 622   62.1     43.06687   2316.03252 777640.9
## 623   62.2     43.04385   2292.89521 777664.1
## 624   62.3     43.02108   2269.98903 777687.0
## 625   62.4     42.99854   2247.31168 777709.7
## 626   62.5     42.97624   2224.86086 777732.2
## 627   62.6     42.95417   2202.63432 777754.4
## 628   62.7     42.93234   2180.62981 777776.4
## 629   62.8     42.91074   2158.84512 777798.2
## 630   62.9     42.88936   2137.27804 777819.8
## 631   63.0     42.86820   2115.92642 777841.2
## 632   63.1     42.84727   2094.78808 777862.4
## 633   63.2     42.82656   2073.86092 777883.3
## 634   63.3     42.80606   2053.14280 777904.1
## 635   63.4     42.78578   2032.63166 777924.6
## 636   63.5     42.76571   2012.32541 777944.9
## 637   63.6     42.74585   1992.22201 777965.0
## 638   63.7     42.72620   1972.31945 777985.0
## 639   63.8     42.70675   1952.61570 778004.7
## 640   63.9     42.68751   1933.10879 778024.2
## 641   64.0     42.66847   1913.79674 778043.5
## 642   64.1     42.64962   1894.67762 778062.7
## 643   64.2     42.63097   1875.74949 778081.6
## 644   64.3     42.61252   1857.01045 778100.4
## 645   64.4     42.59426   1838.45860 778118.9
## 646   64.5     42.57619   1820.09209 778137.3
## 647   64.6     42.55831   1801.90905 778155.5
## 648   64.7     42.54061   1783.90766 778173.6
## 649   64.8     42.52310   1766.08609 778191.4
## 650   64.9     42.50577   1748.44256 778209.1
## 651   65.0     42.48862   1730.97529 778226.5
## 652   65.1     42.47164   1713.68251 778243.8
## 653   65.2     42.45485   1696.56248 778261.0
## 654   65.3     42.43823   1679.61348 778277.9
## 655   65.4     42.42178   1662.83379 778294.7
## 656   65.5     42.40550   1646.22173 778311.4
## 657   65.6     42.38939   1629.77562 778327.8
## 658   65.7     42.37344   1613.49381 778344.1
## 659   65.8     42.35767   1597.37465 778360.3
## 660   65.9     42.34205   1581.41652 778376.2
## 661   66.0     42.32660   1565.61780 778392.1
## 662   66.1     42.31131   1549.97692 778407.7
## 663   66.2     42.29617   1534.49228 778423.2
## 664   66.3     42.28120   1519.16234 778438.6
## 665   66.4     42.26637   1503.98554 778453.7
## 666   66.5     42.25170   1488.96035 778468.8
## 667   66.6     42.23719   1474.08527 778483.7
## 668   66.7     42.22282   1459.35878 778498.4
## 669   66.8     42.20860   1444.77941 778513.0
## 670   66.9     42.19453   1430.34569 778527.5
## 671   67.0     42.18060   1416.05616 778541.8
## 672   67.1     42.16681   1401.90939 778555.9
## 673   67.2     42.15317   1387.90393 778569.9
## 674   67.3     42.13967   1374.03839 778583.8
## 675   67.4     42.12631   1360.31137 778597.6
## 676   67.5     42.11309   1346.72148 778611.2
## 677   67.6     42.10000   1333.26736 778624.6
## 678   67.7     42.08704   1319.94764 778638.0
## 679   67.8     42.07422   1306.76098 778651.2
## 680   67.9     42.06154   1293.70606 778664.2
## 681   68.0     42.04898   1280.78155 778677.2
## 682   68.1     42.03655   1267.98617 778690.0
## 683   68.2     42.02425   1255.31861 778702.7
## 684   68.3     42.01208   1242.77759 778715.2
## 685   68.4     42.00003   1230.36187 778727.6
## 686   68.5     41.98810   1218.07017 778739.9
## 687   68.6     41.97630   1205.90127 778752.1
## 688   68.7     41.96462   1193.85394 778764.2
## 689   68.8     41.95306   1181.92696 778776.1
## 690   68.9     41.94161   1170.11914 778787.9
## 691   69.0     41.93029   1158.42927 778799.6
## 692   69.1     41.91908   1146.85619 778811.2
## 693   69.2     41.90799   1135.39872 778822.7
## 694   69.3     41.89701   1124.05571 778834.0
## 695   69.4     41.88614   1112.82602 778845.3
## 696   69.5     41.87538   1101.70852 778856.4
## 697   69.6     41.86473   1090.70208 778867.4
## 698   69.7     41.85420   1079.80560 778878.3
## 699   69.8     41.84377   1069.01797 778889.1
## 700   69.9     41.83344   1058.33812 778899.8
## 701   70.0     41.82323   1047.76495 778910.4
## 702   70.1     41.81312   1037.29741 778920.9
## 703   70.2     41.80311   1026.93445 778931.3
## 704   70.3     41.79320   1016.67501 778941.5
## 705   70.4     41.78339   1006.51807 778951.7
## 706   70.5     41.77369    996.46259 778961.8
## 707   70.6     41.76408    986.50757 778971.7
## 708   70.7     41.75458    976.65200 778981.6
## 709   70.8     41.74516    966.89489 778991.4
## 710   70.9     41.73585    957.23526 779001.0
## 711   71.0     41.72663    947.67213 779010.6
## 712   71.1     41.71750    938.20453 779020.1
## 713   71.2     41.70847    928.83152 779029.5
## 714   71.3     41.69953    919.55214 779038.7
## 715   71.4     41.69068    910.36547 779047.9
## 716   71.5     41.68193    901.27057 779057.0
## 717   71.6     41.67326    892.26654 779066.1
## 718   71.7     41.66468    883.35245 779075.0
## 719   71.8     41.65618    874.52742 779083.8
## 720   71.9     41.64778    865.79055 779092.6
## 721   72.0     41.63945    857.14097 779101.2
## 722   72.1     41.63122    848.57780 779109.8
## 723   72.2     41.62307    840.10017 779118.3
## 724   72.3     41.61500    831.70724 779126.7
## 725   72.4     41.60701    823.39815 779135.0
## 726   72.5     41.59910    815.17208 779143.2
## 727   72.6     41.59128    807.02818 779151.4
## 728   72.7     41.58353    798.96565 779159.5
## 729   72.8     41.57586    790.98366 779167.4
## 730   72.9     41.56828    783.08141 779175.4
## 731   73.0     41.56076    775.25811 779183.2
## 732   73.1     41.55333    767.51296 779190.9
## 733   73.2     41.54597    759.84519 779198.6
## 734   73.3     41.53868    752.25403 779206.2
## 735   73.4     41.53147    744.73870 779213.7
## 736   73.5     41.52433    737.29845 779221.2
## 737   73.6     41.51727    729.93253 779228.6
## 738   73.7     41.51028    722.64020 779235.8
## 739   73.8     41.50335    715.42072 779243.1
## 740   73.9     41.49650    708.27336 779250.2
## 741   74.0     41.48972    701.19741 779257.3
## 742   74.1     41.48300    694.19215 779264.3
## 743   74.2     41.47636    687.25687 779271.3
## 744   74.3     41.46978    680.39088 779278.1
## 745   74.4     41.46327    673.59349 779284.9
## 746   74.5     41.45682    666.86400 779291.7
## 747   74.6     41.45044    660.20174 779298.3
## 748   74.7     41.44413    653.60603 779304.9
## 749   74.8     41.43788    647.07622 779311.5
## 750   74.9     41.43169    640.61165 779318.0
## 751   75.0     41.42557    634.21166 779324.4
## 752   75.1     41.41950    627.87560 779330.7
## 753   75.2     41.41350    621.60285 779337.0
## 754   75.3     41.40756    615.39276 779343.2
## 755   75.4     41.40168    609.24471 779349.4
## 756   75.5     41.39586    603.15809 779355.4
## 757   75.6     41.39010    597.13227 779361.5
## 758   75.7     41.38439    591.16665 779367.4
## 759   75.8     41.37875    585.26063 779373.4
## 760   75.9     41.37316    579.41361 779379.2
## 761   76.0     41.36763    573.62501 779385.0
## 762   76.1     41.36215    567.89423 779390.7
## 763   76.2     41.35673    562.22071 779396.4
## 764   76.3     41.35137    556.60387 779402.0
## 765   76.4     41.34605    551.04314 779407.6
## 766   76.5     41.34080    545.53797 779413.1
## 767   76.6     41.33559    540.08779 779418.6
## 768   76.7     41.33044    534.69207 779424.0
## 769   76.8     41.32534    529.35025 779429.3
## 770   76.9     41.32029    524.06179 779434.6
## 771   77.0     41.31529    518.82617 779439.9
## 772   77.1     41.31035    513.64286 779445.0
## 773   77.2     41.30545    508.51133 779450.2
## 774   77.3     41.30060    503.43106 779455.3
## 775   77.4     41.29581    498.40155 779460.3
## 776   77.5     41.29106    493.42228 779465.3
## 777   77.6     41.28635    488.49276 779470.2
## 778   77.7     41.28170    483.61249 779475.1
## 779   77.8     41.27709    478.78097 779479.9
## 780   77.9     41.27253    473.99772 779484.7
## 781   78.0     41.26802    469.26226 779489.5
## 782   78.1     41.26355    464.57410 779494.2
## 783   78.2     41.25913    459.93279 779498.8
## 784   78.3     41.25475    455.33784 779503.4
## 785   78.4     41.25041    450.78879 779508.0
## 786   78.5     41.24612    446.28520 779512.5
## 787   78.6     41.24187    441.82659 779516.9
## 788   78.7     41.23767    437.41253 779521.3
## 789   78.8     41.23350    433.04257 779525.7
## 790   78.9     41.22938    428.71626 779530.1
## 791   79.0     41.22530    424.43318 779534.3
## 792   79.1     41.22127    420.19289 779538.6
## 793   79.2     41.21727    415.99496 779542.8
## 794   79.3     41.21331    411.83896 779546.9
## 795   79.4     41.20940    407.72449 779551.1
## 796   79.5     41.20552    403.65112 779555.1
## 797   79.6     41.20168    399.61845 779559.2
## 798   79.7     41.19788    395.62606 779563.2
## 799   79.8     41.19412    391.67357 779567.1
## 800   79.9     41.19040    387.76055 779571.0
## 801   80.0     41.18671    383.88663 779574.9
## 802   80.1     41.18306    380.05142 779578.8
## 803   80.2     41.17945    376.25451 779582.6
## 804   80.3     41.17587    372.49554 779586.3
## 805   80.4     41.17233    368.77413 779590.1
## 806   80.5     41.16883    365.08989 779593.7
## 807   80.6     41.16536    361.44246 779597.4
## 808   80.7     41.16193    357.83147 779601.0
## 809   80.8     41.15853    354.25655 779604.6
## 810   80.9     41.15517    350.71735 779608.1
## 811   81.0     41.15183    347.21351 779611.6
## 812   81.1     41.14854    343.74467 779615.1
## 813   81.2     41.14527    340.31049 779618.5
## 814   81.3     41.14204    336.91062 779621.9
## 815   81.4     41.13884    333.54471 779625.3
## 816   81.5     41.13568    330.21243 779628.7
## 817   81.6     41.13254    326.91344 779632.0
## 818   81.7     41.12944    323.64741 779635.2
## 819   81.8     41.12637    320.41400 779638.5
## 820   81.9     41.12333    317.21291 779641.7
## 821   82.0     41.12032    314.04379 779644.8
## 822   82.1     41.11734    310.90633 779648.0
## 823   82.2     41.11439    307.80022 779651.1
## 824   82.3     41.11146    304.72513 779654.2
## 825   82.4     41.10857    301.68077 779657.2
## 826   82.5     41.10571    298.66683 779660.2
## 827   82.6     41.10288    295.68299 779663.2
## 828   82.7     41.10007    292.72897 779666.2
## 829   82.8     41.09730    289.80445 779669.1
## 830   82.9     41.09455    286.90916 779672.0
## 831   83.0     41.09183    284.04279 779674.9
## 832   83.1     41.08913    281.20505 779677.7
## 833   83.2     41.08647    278.39567 779680.5
## 834   83.3     41.08383    275.61435 779683.3
## 835   83.4     41.08122    272.86082 779686.1
## 836   83.5     41.07863    270.13480 779688.8
## 837   83.6     41.07607    267.43601 779691.5
## 838   83.7     41.07353    264.76419 779694.2
## 839   83.8     41.07102    262.11906 779696.8
## 840   83.9     41.06854    259.50035 779699.4
## 841   84.0     41.06608    256.90781 779702.0
## 842   84.1     41.06365    254.34116 779704.6
## 843   84.2     41.06123    251.80016 779707.1
## 844   84.3     41.05885    249.28454 779709.7
## 845   84.4     41.05649    246.79406 779712.1
## 846   84.5     41.05415    244.32846 779714.6
## 847   84.6     41.05183    241.88749 779717.1
## 848   84.7     41.04954    239.47091 779719.5
## 849   84.8     41.04727    237.07847 779721.9
## 850   84.9     41.04503    234.70993 779724.2
## 851   85.0     41.04280    232.36505 779726.6
## 852   85.1     41.04060    230.04360 779728.9
## 853   85.2     41.03843    227.74534 779731.2
## 854   85.3     41.03627    225.47005 779733.5
## 855   85.4     41.03413    223.21748 779735.7
## 856   85.5     41.03202    220.98742 779738.0
## 857   85.6     41.02993    218.77964 779740.2
## 858   85.7     41.02786    216.59391 779742.4
## 859   85.8     41.02580    214.43003 779744.5
## 860   85.9     41.02377    212.28776 779746.7
## 861   86.0     41.02177    210.16689 779748.8
## 862   86.1     41.01978    208.06721 779750.9
## 863   86.2     41.01781    205.98851 779753.0
## 864   86.3     41.01586    203.93057 779755.1
## 865   86.4     41.01393    201.89319 779757.1
## 866   86.5     41.01201    199.87617 779759.1
## 867   86.6     41.01012    197.87930 779761.1
## 868   86.7     41.00825    195.90238 779763.1
## 869   86.8     41.00640    193.94521 779765.0
## 870   86.9     41.00456    192.00760 779767.0
## 871   87.0     41.00274    190.08934 779768.9
## 872   87.1     41.00095    188.19024 779770.8
## 873   87.2     40.99917    186.31012 779772.7
## 874   87.3     40.99740    184.44878 779774.6
## 875   87.4     40.99566    182.60604 779776.4
## 876   87.5     40.99393    180.78171 779778.2
## 877   87.6     40.99222    178.97560 779780.0
## 878   87.7     40.99053    177.18754 779781.8
## 879   87.8     40.98885    175.41734 779783.6
## 880   87.9     40.98719    173.66482 779785.3
## 881   88.0     40.98555    171.92982 779787.1
## 882   88.1     40.98392    170.21215 779788.8
## 883   88.2     40.98231    168.51163 779790.5
## 884   88.3     40.98072    166.82811 779792.2
## 885   88.4     40.97914    165.16141 779793.9
## 886   88.5     40.97758    163.51136 779795.5
## 887   88.6     40.97603    161.87779 779797.1
## 888   88.7     40.97450    160.26054 779798.8
## 889   88.8     40.97299    158.65945 779800.4
## 890   88.9     40.97149    157.07436 779802.0
## 891   89.0     40.97000    155.50510 779803.5
## 892   89.1     40.96853    153.95152 779805.1
## 893   89.2     40.96708    152.41346 779806.6
## 894   89.3     40.96564    150.89076 779808.1
## 895   89.4     40.96421    149.38328 779809.7
## 896   89.5     40.96280    147.89086 779811.1
## 897   89.6     40.96140    146.41335 779812.6
## 898   89.7     40.96001    144.95060 779814.1
## 899   89.8     40.95864    143.50247 779815.5
## 900   89.9     40.95729    142.06880 779817.0
## 901   90.0     40.95595    140.64945 779818.4
## 902   90.1     40.95462    139.24429 779819.8
## 903   90.2     40.95330    137.85316 779821.2
## 904   90.3     40.95200    136.47593 779822.6
## 905   90.4     40.95071    135.11246 779823.9
## 906   90.5     40.94943    133.76262 779825.3
## 907   90.6     40.94817    132.42625 779826.6
## 908   90.7     40.94691    131.10324 779827.9
## 909   90.8     40.94568    129.79345 779829.3
## 910   90.9     40.94445    128.49674 779830.6
## 911   91.0     40.94324    127.21299 779831.8
## 912   91.1     40.94203    125.94206 779833.1
## 913   91.2     40.94084    124.68383 779834.4
## 914   91.3     40.93967    123.43817 779835.6
## 915   91.4     40.93850    122.20495 779836.9
## 916   91.5     40.93735    120.98406 779838.1
## 917   91.6     40.93620    119.77536 779839.3
## 918   91.7     40.93507    118.57874 779840.5
## 919   91.8     40.93395    117.39407 779841.7
## 920   91.9     40.93284    116.22124 779842.8
## 921   92.0     40.93174    115.06012 779844.0
## 922   92.1     40.93066    113.91061 779845.2
## 923   92.2     40.92958    112.77258 779846.3
## 924   92.3     40.92852    111.64592 779847.4
## 925   92.4     40.92746    110.53051 779848.5
## 926   92.5     40.92642    109.42625 779849.6
## 927   92.6     40.92538    108.33302 779850.7
## 928   92.7     40.92436    107.25072 779851.8
## 929   92.8     40.92335    106.17922 779852.9
## 930   92.9     40.92235    105.11843 779854.0
## 931   93.0     40.92135    104.06824 779855.0
## 932   93.1     40.92037    103.02854 779856.1
## 933   93.2     40.91940    101.99923 779857.1
## 934   93.3     40.91843    100.98020 779858.1
## 935   93.4     40.91748     99.97135 779859.1
## 936   93.5     40.91654     98.97258 779860.1
## 937   93.6     40.91560     97.98379 779861.1
## 938   93.7     40.91468     97.00488 779862.1
## 939   93.8     40.91376     96.03575 779863.1
## 940   93.9     40.91285     95.07629 779864.0
## 941   94.0     40.91196     94.12643 779865.0
## 942   94.1     40.91107     93.18605 779865.9
## 943   94.2     40.91019     92.25507 779866.8
## 944   94.3     40.90932     91.33339 779867.8
## 945   94.4     40.90845     90.42092 779868.7
## 946   94.5     40.90760     89.51757 779869.6
## 947   94.6     40.90676     88.62324 779870.5
## 948   94.7     40.90592     87.73784 779871.4
## 949   94.8     40.90509     86.86129 779872.2
## 950   94.9     40.90427     85.99350 779873.1
## 951   95.0     40.90346     85.13437 779874.0
## 952   95.1     40.90266     84.28383 779874.8
## 953   95.2     40.90186     83.44179 779875.7
## 954   95.3     40.90107     82.60816 779876.5
## 955   95.4     40.90029     81.78286 779877.3
## 956   95.5     40.89952     80.96580 779878.1
## 957   95.6     40.89876     80.15691 779878.9
## 958   95.7     40.89800     79.35610 779879.7
## 959   95.8     40.89725     78.56328 779880.5
## 960   95.9     40.89651     77.77839 779881.3
## 961   96.0     40.89578     77.00134 779882.1
## 962   96.1     40.89505     76.23206 779882.9
## 963   96.2     40.89433     75.47045 779883.6
## 964   96.3     40.89362     74.71646 779884.4
## 965   96.4     40.89291     73.97000 779885.1
## 966   96.5     40.89221     73.23100 779885.9
## 967   96.6     40.89152     72.49938 779886.6
## 968   96.7     40.89084     71.77507 779887.3
## 969   96.8     40.89016     71.05800 779888.1
## 970   96.9     40.88949     70.34809 779888.8
## 971   97.0     40.88883     69.64527 779889.5
## 972   97.1     40.88817     68.94948 779890.2
## 973   97.2     40.88752     68.26063 779890.9
## 974   97.3     40.88688     67.57867 779891.5
## 975   97.4     40.88624     66.90352 779892.2
## 976   97.5     40.88561     66.23512 779892.9
## 977   97.6     40.88498     65.57339 779893.5
## 978   97.7     40.88436     64.91828 779894.2
## 979   97.8     40.88375     64.26970 779894.8
## 980   97.9     40.88314     63.62761 779895.5
## 981   98.0     40.88254     62.99194 779896.1
## 982   98.1     40.88195     62.36261 779896.8
## 983   98.2     40.88136     61.73958 779897.4
## 984   98.3     40.88078     61.12276 779898.0
## 985   98.4     40.88020     60.51211 779898.6
## 986   98.5     40.87963     59.90756 779899.2
## 987   98.6     40.87907     59.30905 779899.8
## 988   98.7     40.87851     58.71652 779900.4
## 989   98.8     40.87795     58.12991 779901.0
## 990   98.9     40.87740     57.54916 779901.6
## 991   99.0     40.87686     56.97421 779902.1
## 992   99.1     40.87632     56.40500 779902.7
## 993   99.2     40.87579     55.84149 779903.3
## 994   99.3     40.87527     55.28360 779903.8
## 995   99.4     40.87474     54.73128 779904.4
## 996   99.5     40.87423     54.18449 779904.9
## 997   99.6     40.87372     53.64315 779905.5
## 998   99.7     40.87321     53.10723 779906.0
## 999   99.8     40.87271     52.57666 779906.6
## 1000  99.9     40.87221     52.05139 779907.1
## 1001 100.0     40.87172     51.53136 779907.6
```

## Gathering makes things tidy

* Use long structure to mark things that are comparable, or have the same units


```r
print(gat <- gather(sim[1:6, ], class, people, S:R))
```

```
##    time class      people
## 1   0.0     S 390000.0000
## 2   0.1     S 389991.0000
## 3   0.2     S 389981.2802
## 4   0.3     S 389970.7831
## 5   0.4     S 389959.4467
## 6   0.5     S 389947.2037
## 7   0.0     I    100.0000
## 8   0.1     I    108.0000
## 9   0.2     I    116.6398
## 10  0.3     I    125.9705
## 11  0.4     I    136.0472
## 12  0.5     I    146.9297
## 13  0.0     R 389900.0000
## 14  0.1     R 389901.0000
## 15  0.2     R 389902.0800
## 16  0.3     R 389903.2464
## 17  0.4     R 389904.5061
## 18  0.5     R 389905.8666
```

## Spreading can make things more human-readable


```r
print(spread(gat, class, people))
```

```
##   time        I        R        S
## 1  0.0 100.0000 389900.0 390000.0
## 2  0.1 108.0000 389901.0 389991.0
## 3  0.2 116.6398 389902.1 389981.3
## 4  0.3 125.9705 389903.2 389970.8
## 5  0.4 136.0472 389904.5 389959.4
## 6  0.5 146.9297 389905.9 389947.2
```

## Flow

* Put input data into a tidy, relational form
	* Clean on the way
	* This is your database, whether you use database software or not

* Clean, maintain and merge data in the database

* Export files for analysis, presentation, etc.
	* You may wind up rebuilding files like the ones you started with
	* They are now quality-checked, and may also be easier to update

# Importing

## Summarize

* Check that numbers are numbers, dates are dates, etc.


```r
villageTable <- (villageTable
	%>% transform(village=as.factor(village))
)
summary(villageTable)
```

```
##      area              village        grid                fup        
##  Length:180         1      :  1   Length:180         Min.   : 1.000  
##  Class :character   2      :  1   Class :character   1st Qu.: 3.000  
##  Mode  :character   3      :  1   Mode  :character   Median : 6.000  
##                     4      :  1                      Mean   : 6.217  
##                     5      :  1                      3rd Qu.: 7.000  
##                     6      :  1                      Max.   :92.000  
##                     (Other):174                                      
##     vname                vu               grouped1         grouped2      
##  Length:180         Length:180         Min.   :  0.00   Min.   : 0.0000  
##  Class :character   Class :character   1st Qu.:  0.00   1st Qu.: 0.0000  
##  Mode  :character   Mode  :character   Median : 24.50   Median : 0.0000  
##                                        Mean   : 37.06   Mean   : 0.7833  
##                                        3rd Qu.: 52.25   3rd Qu.: 1.0000  
##                                        Max.   :550.00   Max.   :10.0000  
##                                                                          
##    scattered1       scattered2        population    
##  Min.   :  0.00   Min.   :0.00000   Min.   :   0.0  
##  1st Qu.:  0.00   1st Qu.:0.00000   1st Qu.: 124.0  
##  Median :  6.00   Median :0.00000   Median : 222.0  
##  Mean   : 14.29   Mean   :0.01111   Mean   : 287.1  
##  3rd Qu.: 22.00   3rd Qu.:0.00000   3rd Qu.: 375.0  
##  Max.   :117.00   Max.   :1.00000   Max.   :2556.0  
## 
```

## List

* Make lists of what occurs with what (and how many times)


```r
print(villageTable
	%>% group_by(vname, vu)
	%>% summarize(count = n())
)
```

```
## # A tibble: 180 x 3
## # Groups:   vname [?]
##    vname           vu    count
##    <chr>           <chr> <int>
##  1 Adinis Fulanin  Kar       1
##  2 Aduwa           Aju       1
##  3 Ajura           Aju       1
##  4 Anju            Dok       1
##  5 Arindi          Sug       1
##  6 Asayaya         Kit       1
##  7 Ba'wa           Dok       1
##  8 Bakan Sabara    Kar       1
##  9 Bakan Sabara II Kar       1
## 10 Balalashi       Dok       1
## # ... with 170 more rows
```

## ...

* The computer is your friend


```r
print(villageTable
	%>% group_by(vname, vu)
	%>% summarize(count = n())
	%>% filter(count>1)
)
```

```
## # A tibble: 0 x 3
## # Groups:   vname [0]
## # ... with 3 variables: vname <chr>, vu <chr>, count <int>
```

## ...

* and you always want to check yourself


```r
print(villageTable
	%>% group_by(vname)
	%>% summarize(count = n())
	%>% filter(count>1)
)
```

```
## # A tibble: 2 x 2
##   vname      count
##   <chr>      <int>
## 1 Daurawa        2
## 2 Sabon Gari     2
```

## Making relational tables

If we had data like the ```parasiteTable```, we would want to break it into

* A table at the level of people

* A table at the level of sampling events

* A table at the level of measurements

This process leads to improved clarity, __and improved cleaning__

## Parasite table


```r
print(parasiteTable
	%>% group_by(id, village, compound)
	%>% summarize(count=n())
)
```

```
## # A tibble: 13,656 x 4
## # Groups:   id, village [?]
##       id village compound count
##    <int>   <int>    <int> <int>
##  1     1     801      401    16
##  2     2     801      401    16
##  3     3     801      401    16
##  4     4     801      401    16
##  5     5     801      401    16
##  6     6     801      401    16
##  7     7     801      401    12
##  8     8     801      401    11
##  9     9     801      401    15
## 10     9     801      417     1
## # ... with 13,646 more rows
```


## Parasite table


```r
print(parasiteTable
	%>% group_by(id, village, compound)
	%>% summarize(count=n())
	%>% group_by(id)
	%>% summarize(count=n())
	%>% filter(count>1)
	%>% arrange(desc(count))
)
```

```
## # A tibble: 756 x 2
##       id count
##    <int> <int>
##  1  6571     4
##  2  6572     4
##  3  6573     4
##  4  6574     4
##  5  6575     4
##  6  6576     4
##  7  6577     4
##  8  6578     4
##  9    41     3
## 10  1081     3
## # ... with 746 more rows
```

## Explore ranges


```r
print(ggplot(villageTable, aes(x=population))
	+ geom_histogram()
)
```

```
## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.
```

![plot of chunk pophist.R](figure/pophist.R-1.png)

## Explore ranges

![Population histogram](figure/pophist.R-1.png)

# Correction tables

## Mistakes
Let's say you find an obvious error in your data


```
##   country continent count
## 1   Kenya    Africa    23
## 2  Uganda    Africa    31
## 3  Ungada    Africa     1
## 4 Vietnam      Asia    16
```

How should you fix it?

## A table

A table:

* respects the original data
* records your decision
* is transparent to yourself and others
* __fixes the mistake again, if it happens again__


```
##   country patchcountry
## 1  Ungada       Uganda
```

* Make a csv with an editor or spreadsheet program

## Patching

* Fix the problem as far "upstream" as possible

* Not the count table (as I'm doing here)


```r
patchTab <- (ctab
	%>% left_join(cortab)
)
```

```
## Joining, by = "country"
```

```
## Warning: Column `country` joining factors with different levels, coercing
## to character vector
```

```r
print(patchTab)
```

```
##   country continent count patchcountry
## 1   Kenya    Africa    23         <NA>
## 2  Uganda    Africa    31         <NA>
## 3  Ungada    Africa     1       Uganda
## 4 Vietnam      Asia    16         <NA>
```

## ...


```
##   country continent count patchcountry
## 1   Kenya    Africa    23         <NA>
## 2  Uganda    Africa    31         <NA>
## 3  Ungada    Africa     1       Uganda
## 4 Vietnam      Asia    16         <NA>
```

## NA logic is scary

NA means "Something I don't know". You don't get the answers you expect if you compare things to NA:



```r
"Jonathan" == NA
```

```
## [1] NA
```

## Finish the patch, being careful



```r
ctab <- (patchTab
	%>% mutate(country=ifelse(is.na(patchcountry), country, patchcountry))
	%>% select(-patchcountry)
)
print(ctab)
```

```
##   country continent count
## 1   Kenya    Africa    23
## 2  Uganda    Africa    31
## 3       1    Africa     1
## 4 Vietnam      Asia    16
```

## Be careful-er


```r
ctab <- (patchTab
	%>% mutate(country=ifelse(is.na(patchcountry), country, 
		as.character(patchcountry)))
	%>% select(-patchcountry)
)
print(ctab)
```

```
##   country continent count
## 1   Kenya    Africa    23
## 2  Uganda    Africa    31
## 3  Uganda    Africa     1
## 4 Vietnam      Asia    16
```

* Never be afraid to break pipes up or put them back together.

## Factors

* R likes to convert characters to factors

* Factors can be useful, but they're more often weird

* Be aware of this as a possible problem

* The more you use tools from the tidy family, the less this will happen



## Dictionary tables

* You might want to summarize a factor variable into categories that you define

* In this case you could use a similar table (Ungada $\to$ Uganda), but different logic
	* You only want to keep the new version
	* ... and check for cases where the original is not matched

## Making dictionaries


Print out all the codes for a particular variable, and see what you think of them


```r
print(religTab
	%>% select(code)
	%>% distinct()
)
```

```
##                     code
## 1               Catholic
## 2               Orthodox
## 3         Roman catholic
## 4              Adventist
## 5               Anglican
## 6        Anglican Church
## 7         Apostolic Sect
## 8               Aventist
## 9                   CCAP
## 10           Charismatic
## 11            Christrian
## 12            Chrétienne
## 13     Eglise du 7e jour
## 14                 Elcin
## 15             Envagelic
## 16            Evangelist
## 17           Evangelical
## 18            ^Christian
## 19               Jehovah
## 20       Jehovah Witness
## 21           kimbanguist
## 22             Methodist
## 23         New apostolic
## 24           Pentecostal
## 25            Protestant
## 26   Protestant/Anglican
## 27 Protestant/ Christian
## 28        Salvation Army
## 29           Seventh Day
## 30 Seventh-day adventist
## 31                   SDA
## 32               Baptist
## 33                 ^Zion
## 34               Zionist
## 35                 Islam
## 36               Islamic
## 37                Moslem
## 38                Muslem
## 39                Mulsim
## 40                Muslim
## 41                Muslum
## 42            Musualmane
## 43      African religion
## 44               Animist
## 45              Animiste
## 46       Anytime message
## 47                 Bahai
## 48                Bisaka
## 49                 Hindu
## 50                 Jeova
## 51                  Mana
## 52                 Mungu
## 53                  None
## 54           No religion
## 55                ^Other
## 56         Sans religion
## 57           Traditional
## 58          Traditionnal
## 59        Traditionalist
## 60  Traditionnal/animist
## 61          United faith
## 62         Not responded
```

## Coders can be funny

```r
print(religTab
	%>% select(code)
	%>% distinct()
	%>% filter(grepl("^M", code))
)
```

```
##         code
## 1  Methodist
## 2     Moslem
## 3     Muslem
## 4     Mulsim
## 5     Muslim
## 6     Muslum
## 7 Musualmane
## 8       Mana
## 9      Mungu
```

## Build a dictionary

You should start by editing the output from your previous step


```r
print(religTab)
```

```
##             category                  code
## 1  Catholic/Orthodox              Catholic
## 2  Catholic/Orthodox              Orthodox
## 3  Catholic/Orthodox        Roman catholic
## 4          Christian             Adventist
## 5          Christian              Anglican
## 6          Christian       Anglican Church
## 7          Christian        Apostolic Sect
## 8          Christian              Aventist
## 9          Christian                  CCAP
## 10         Christian           Charismatic
## 11         Christian            Christrian
## 12         Christian            Chrétienne
## 13         Christian     Eglise du 7e jour
## 14         Christian                 Elcin
## 15         Christian             Envagelic
## 16         Christian            Evangelist
## 17         Christian           Evangelical
## 18         Christian            ^Christian
## 19         Christian               Jehovah
## 20         Christian       Jehovah Witness
## 21         Christian           kimbanguist
## 22         Christian             Methodist
## 23         Christian         New apostolic
## 24         Christian           Pentecostal
## 25         Christian            Protestant
## 26         Christian   Protestant/Anglican
## 27         Christian Protestant/ Christian
## 28         Christian        Salvation Army
## 29         Christian           Seventh Day
## 30         Christian Seventh-day adventist
## 31         Christian                   SDA
## 32         Christian               Baptist
## 33         Christian                 ^Zion
## 34         Christian               Zionist
## 35            Muslim                 Islam
## 36            Muslim               Islamic
## 37            Muslim                Moslem
## 38            Muslim                Muslem
## 39            Muslim                Mulsim
## 40            Muslim                Muslim
## 41            Muslim                Muslum
## 42            Muslim            Musualmane
## 43        None/Other      African religion
## 44        None/Other               Animist
## 45        None/Other              Animiste
## 46        None/Other       Anytime message
## 47        None/Other                 Bahai
## 48        None/Other                Bisaka
## 49        None/Other                 Hindu
## 50        None/Other                 Jeova
## 51        None/Other                  Mana
## 52        None/Other                 Mungu
## 53        None/Other                  None
## 54        None/Other           No religion
## 55        None/Other                ^Other
## 56        None/Other         Sans religion
## 57        None/Other           Traditional
## 58        None/Other          Traditionnal
## 59        None/Other        Traditionalist
## 60        None/Other  Traditionnal/animist
## 61        None/Other          United faith
## 62                NA         Not responded
```

## Using a dictionary

Start the same way as before.


```
##         person       religion
## 1 Ntombikayise         Mulsim
## 2    Gao Zhong       Anglican
## 3      Mafalda         Angler
## 4         Bill Roman catholic
```


```r
patchTab <- (churchTab
	%>% left_join(religTab, by=c("religion"="code"))
) %>% print()
```

```
## Warning: Column `religion`/`code` joining factor and character vector,
## coercing into character vector
```

```
##         person       religion          category
## 1 Ntombikayise         Mulsim            Muslim
## 2    Gao Zhong       Anglican         Christian
## 3      Mafalda         Angler              <NA>
## 4         Bill Roman catholic Catholic/Orthodox
```

### ...


```
##         person       religion          category
## 1 Ntombikayise         Mulsim            Muslim
## 2    Gao Zhong       Anglican         Christian
## 3      Mafalda         Angler              <NA>
## 4         Bill Roman catholic Catholic/Orthodox
```

## Dictionary replacement

But use different logic for replacement


```r
catTab <- (patchTab
	%>% mutate(religion=category)
	%>% select(-category)
) %>% print()
```

```
##         person          religion
## 1 Ntombikayise            Muslim
## 2    Gao Zhong         Christian
## 3      Mafalda              <NA>
## 4         Bill Catholic/Orthodox
```

## Play with your data

* Don't touch the original data
* Make scripts and make sure that they are replicable
* Don't be afraid to play, experiment, probe
* You want to like your data-manipulation tools, and get your data as clean as possible

## Summary

* Let the computer serve you
	* Input in the form that you want to input
	* Manage in the tidy form that is efficient and logical
	* Output in the way you want to output

* Be aggressive about exploring, questioning and cleaning
