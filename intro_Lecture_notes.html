<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <meta name="author" content="Jonathan Dushoff and Ben Bolker" />
  <meta name="date" content="2016-04-26" />
  <title>Introduction to R</title>
  <style type="text/css">code{white-space: pre;}</style>
  <style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
  </style>
  <link rel="stylesheet" href="qmee.css" type="text/css" />
</head>
<body>
<header class="site-header">
<div class="wrapper">
	<h1 class="title">
		<a href="index.html">Biology 708, McMaster University</a>
	</h1>
	<div style="text-align:center">
		<img src="http://imgs.xkcd.com/comics/self_description.png">
	</div>
</div>
</header>
<div id="header">
<h1 class="title">Introduction to R</h1>
<h2 class="author">Jonathan Dushoff and Ben Bolker</h2>
<h3 class="date">26 April 2016</h3>
</div>
<!-- rendering
 HTML:
   rmarkdown::render("intro_Lecture_notes.rmd")
   rmarkdown::render("intro_Lecture_notes.rmd",output_format="ioslides_presentation")
   NOTE slide_level=3 doesn't do what I want! Makes section headers <3 into *section slides* ...

   rmarkdown::ioslides_presentation("intro_Lecture_notes.rmd",header_level=3)


https://www.rdocumentation.org/packages/rmarkdown/versions/1.3/topics/ioslides_presentation
   -->
<!-- BMB: not sure what this stuff is for?  Was it hidden in a previous version?  How is it helpful? -->
<!-- in markdown, two or more spaces at the end of a line specify a hard line break-->
<h1 id="basics">Basics</h1>
<h2 id="r-is-a-programming-language">R is a programming language</h2>
<ul>
<li>You may or may not use R for programming tasks,<br />
but it will help if you understand roughly how it works inside.</li>
<li>What is a program?
<ul>
<li>A program is a collection of simple instructions (read, write, send, manipulate, calculate) that should be executed in a logical order</li>
<li>A program’s flow is controlled by <em>control structures</em> (instructions about what instruction to do next)</li>
<li>What are some examples of programs, and how do they work?</li>
</ul></li>
</ul>
<h2 id="calculation">Calculation</h2>
<p>R works as a calculator.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">2+2</span>
<span class="dv">2439</span>*<span class="dv">41</span>
<span class="dv">259</span>*<span class="dv">3861</span>
<span class="dv">2</span>+<span class="kw">sqrt</span>(<span class="dv">91</span>)</code></pre></div>
<p>What about:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">7+3</span>*<span class="dv">9</span>
<span class="dv">32</span>/<span class="dv">4</span>*<span class="dv">4</span></code></pre></div>
<p>Figure out what the second one does, and then explain how you would write it more clearly.</p>
<h2 id="assigning-values">Assigning values</h2>
<p>R can remember numbers and give them back to you. This is the foundation of being able to write programs that do many things in a specified order.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="dv">23</span>
<span class="kw">print</span>(x)
x +<span class="st"> </span><span class="dv">17</span>
y &lt;-<span class="st"> </span>x +<span class="st"> </span><span class="dv">17</span>
y</code></pre></div>
<h1 id="objects">Objects</h1>
<hr />
<p>R keeps track of a variety of objects: data structures and functions mostly. You can see all of your user-defined objects by typing <code>objects()</code> (the parentheses mean that you are calling a <em>function</em>; more on this later).</p>
<h2 id="values">Values</h2>
<p>In addition to numbers, R has other kinds of values (also known as “atomic types”). The main ones we’re interested in are <code>character</code>, <code>numeric</code> and <code>logical</code> (ie., <code>TRUE</code> or <code>FALSE</code>). <code>str()</code> is one way to try to figure out what your R object is.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">num &lt;-<span class="st"> </span><span class="dv">3</span>
<span class="kw">str</span>(num) 
 
char &lt;-<span class="st"> &quot;Hello, class?&quot;</span>
<span class="kw">str</span>(char)
 
logic &lt;-<span class="st"> </span><span class="ot">TRUE</span> ## Note lack of quotes
<span class="kw">str</span>(logic)</code></pre></div>
<h2 id="other-types">Other types</h2>
<p>R objects are divided into <em>types</em>. Other than the above, we’re mostly interested in three of these: <em>vectors</em>, <em>lists</em> and <em>functions</em>.</p>
<h2 id="vectors">Vectors</h2>
<p>A vector consists of zero or more values of the same <em>storage mode</em>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">words &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Mary&quot;</span>, <span class="st">&quot;had&quot;</span>, <span class="st">&quot;a&quot;</span>, <span class="st">&quot;little&quot;</span>, <span class="st">&quot;lamb&quot;</span>)
<span class="co"># c() puts elements together into a vector</span>
<span class="kw">str</span>(words)
 
<span class="kw">print</span>(v &lt;-<span class="st"> </span><span class="dv">1</span>:<span class="dv">5</span>)  ## &#39;m:n&#39; creates a sequence from m to n
<span class="kw">str</span>(v)</code></pre></div>
<h2 id="vector-math">Vector math</h2>
<p>R does math on vectors directly.</p>
<!-- this flavor of markdown / pandoc needs an empty line before an itemized list -->
<ul>
<li>If we add (for example) two vectors we add each pair of corresponding elements.</li>
<li>If we multiply a vector by a <em>scalar</em> (a single number) we multiply each element by the scalar.</li>
<li>Avoid arithmetic involving two vectors of different length (except the scalar case, above)</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">v &lt;-<span class="st"> </span><span class="dv">1</span>:<span class="dv">5</span>
w &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">4</span>)
v+w
<span class="dv">2</span>*w</code></pre></div>
<h2 id="no-scalars">No scalars</h2>
<p>R does not have any particular idea of individual numbers (or strings, etc.); you represent a number as a vector of length 1. This has advantages and disadvantages.</p>
<h2 id="lists">Lists</h2>
<p>A list is a bunch of things in order. Those things can be any R object - vectors, functions, other lists …</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">L &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dv">1</span>:<span class="dv">3</span>, <span class="st">&quot;Apple tree&quot;</span>, <span class="ot">TRUE</span>)
<span class="kw">str</span>(L)
<span class="kw">str</span>(L[<span class="dv">1</span>]) ## L[1] picks out the first element of the list
LL &lt;-<span class="st"> </span><span class="kw">list</span>(L, <span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">7</span>, <span class="dv">9</span>))
<span class="kw">str</span>(LL)
<span class="kw">str</span>(LL[<span class="dv">1</span>])</code></pre></div>
<h2 id="functions">Functions</h2>
<p>Functions are “called” using parentheses. A function is a set of commands that uses whatever “arguments” are inside the parentheses and does things (including possibly “returning” a result).</p>
<p>What functions have we seen so far?</p>
<p>Example: <code>mean()</code> in its simplest form takes a vector argument and returns the mean.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mean</span>(<span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">5</span>, <span class="dv">11</span>))
 
x &lt;-<span class="st"> </span><span class="dv">1</span>:<span class="dv">10</span>
m_x &lt;-<span class="st"> </span><span class="kw">mean</span>(x)
<span class="kw">print</span>(m_x)</code></pre></div>
<h2 id="about-functions">About functions</h2>
<p>You can learn about any built-in function by using R’s help: type <code>?&quot;mean&quot;</code> or <code>help(&quot;mean&quot;)</code>.</p>
<p>Arguments can be passed to functions in order, or by using names. For example, <code>mean</code> takes an optional argument <code>trim</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span>(<span class="dv">1</span>:<span class="dv">10</span>)^<span class="dv">2</span>
<span class="kw">mean</span>(x)
<span class="kw">mean</span>(x, <span class="dt">trim=</span><span class="fl">0.1</span>)</code></pre></div>
<h2 id="function-syntax">Function syntax</h2>
<p><code>=</code> is a synonym for <code>&lt;-</code> at the top level (and many people use it). Be aware that they are not synonyms inside a function call: <code>&lt;-</code> still means assignment, but <code>=</code> is used to name an argument.</p>
<h2 id="variable-names">Variable names</h2>
<p>R variable names are case-sensitive. This means that <code>m</code> and <code>M</code> are different variables. In general, you should not try to take advantage of this, because it may cause confusion.</p>
<p>R variable names have to start with a letter, and certain characters (particularly space characters) are not allowed. Good naming conventions include:</p>
<ul>
<li>Using mostly letters, underscores (<code>_</code>) and dots (<code>.</code>)</li>
<li>Not using potentially confusing names like <code>l</code> or <code>O</code>.</li>
<li>Not using built-in names (like <code>c</code>, <code>list</code>, or <code>data</code>) for variables.</li>
<li>Make readable variable names using <code>camelCase</code>, <code>snake_case</code>, or <code>kebab.case</code></li>
<li>Avoid <code>variableNamesThatAreExcessivelyLong</code></li>
</ul>
<h1 id="compound-objects">Compound objects</h1>
<hr />
<p>R is a sophisticated system that builds complicated structures on top of these simple objects. Hopefully we’ll develop an intuition for more of that as we go along. People interested in nuts and bolts can also look at the (rather scary!) R language definition on the <a href="http://cran.r-project.org/manuals.html">R manuals page</a>. For now, we’ll talk about just a few structures.</p>
<h2 id="matrices">Matrices</h2>
<p>In R, matrices are basically vectors that understand that they have a shape. R knows how to do matrix multiplication on them, which is very cool, and other kinds of linear algebra. There are many ways to make a matrix: use <code>?&quot;matrix&quot;</code> to get more information.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">m &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">0</span>, <span class="dv">1</span>), <span class="dt">nrow=</span><span class="dv">2</span>)
<span class="kw">print</span>(m)
<span class="co"># R arranges vectors into matrices in COLUMN-FIRST order, by default</span>
 
<span class="co"># Elementwise (&quot;vector&quot;) multiplication (or &quot;Hadamard product&quot;)</span>
m*m
 
<span class="co"># Matrix multiplication</span>
m %*%<span class="st"> </span>m</code></pre></div>
<h2 id="data-frames">Data frames</h2>
<p>Data frames are lists that have a rectangular shape (they look like, and can be used a like matrices, but don’t have to be of a single “mode” - in particular you can mix numbers, factors (see below), dates, …).</p>
<p>We’ll talk more about data frames when we start dealing with data.</p>
<h2 id="factors">Factors</h2>
<p>Factors are used to describe items that can have a known set of values (gender, social class, etc.) - <em>categorical variables</em> in statistical terms. We will also talk more about them later.</p>
<h1 id="more-stuff">More stuff</h1>
<h2 id="control-structures">Control structures</h2>
<p>Control structures in R include:</p>
<ul>
<li>loops: we will use <code>for</code>, <code>lapply</code> and <code>apply</code>, among others. <code>lapply</code> stands for <strong>l</strong>ist <strong>apply</strong>.</li>
<li>conditionals: <code>if</code> and <code>ifelse</code>. Use <code>ifelse</code> with care!</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">v &lt;-<span class="st"> </span><span class="dv">1</span>:<span class="dv">10</span>
for (x in v) {
  <span class="kw">print</span>(x^<span class="dv">2</span>)
}
for (x in v){
    if(x&gt;=<span class="dv">4</span>) {
        <span class="kw">print</span>(x^<span class="dv">2</span>)
    }
}</code></pre></div>
<h2 id="control-syntax">Control syntax</h2>
<p>R uses <code>==</code> to test equality, and <code>!=</code> to test inequality. (R will often guess and warn you if you wrongly try to use <code>=</code>, but not always …)</p>
<ul>
<li>Use <code>&amp;</code> for “and”, and <code>|</code> for “or” when testing vectors in parallel
<ul>
<li><code>&amp;&amp;</code> and <code>||</code> test single conditions; it’s usually OK to stick to <code>&amp;</code> and <code>|</code>.</li>
</ul></li>
</ul>
<h2 id="syntactic-principles">Syntactic principles</h2>
<p>You may have noticed that we sometimes just state something in order to print its value. It’s better practice to always say <code>print</code>, when that’s what you want. * Clearer, and less fragile</p>
<p>Similarly, you usually don’t need to say <code>return</code> to return a function value … but you should.</p>
<p>Clarity and explicitness are worth more than saving a few keystrokes.</p>
<ul>
<li>When R was invented, this was less clear</li>
</ul>
<h2 id="names">Names</h2>
<p>R’s primary objects often have associated “attributes”. The information that tells R what shape a matrix (or higher-dimensional array) is is an attribute. R also has “name” attributes: <code>names</code>, <code>rownames</code> and <code>colnames</code>.</p>
<p>You can select single elements from an R object using the element operator <code>[[]]</code>, and subsets using the subset operator <code>[]</code>. If the object has dimensions, you can separate them with a comma.</p>
<h2 id="selecting">Selecting</h2>
<p>You can also select things by name, using the syntax <code>v[&quot;name&quot;]</code> or <code>v[n]</code>, if <code>n</code> is a variable that contains the name. In general it’s a good idea to use names instead of numbers whenever you can, because (1) your code will be easier to read (<code>x[&quot;temperature&quot;]</code> instead of <code>x[21]</code>) and (2) your code will be more robust (i.e., if you modify something so that temperature is now in position 22 rather than 21).</p>
<h2 id="selection-example">Selection example</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># InsectSprays is a built-in data set in R</span>
<span class="kw">class</span>(InsectSprays)
<span class="kw">head</span>(InsectSprays)
<span class="kw">names</span>(InsectSprays)
 
<span class="co"># Select the first list element of InsectSprays</span>
InsectSprays[[<span class="dv">1</span>]]
 
<span class="co"># Select a subset of InsectSprays containing only the first list element</span>
InsectSprays[<span class="dv">1</span>]
 
<span class="co"># Select the first column of InsectSprays</span>
InsectSprays[, <span class="dv">1</span>]
 
<span class="co"># Select part of the first column of InsectSprays</span>
InsectSprays[<span class="dv">1</span>:<span class="dv">10</span>, <span class="dv">1</span>]
 
<span class="co"># Select the first list element of InsectSprays by name</span>
InsectSprays[[<span class="st">&quot;count&quot;</span>]]
 
<span class="co"># Use a convenient but sometimes dangerous short-cut for this</span>
InsectSprays$count</code></pre></div>
<h2 id="arcane">Arcane</h2>
<p>You may have been surprised by the column-selection results. We used the subset operator, but got a single element instead. R noticed we only selected one thing, and “collapsed” the object for our “convenience”. This sort of thing is a common problem in R, probably due to its rather ancient history, and the tension between structure and convenience (particularly convenience for interactive use).</p>
<p>In programs, it is bad practice to let R do this (because it will confuse the program when the structure of your results changes). In this case, you can avoid it by selecting from the list.</p>
<h2 id="being-explicit">Being explicit</h2>
<p>It’s unfortunate that R makes you do stuff like this…</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># A data frame</span>
InsectSprays[, <span class="dv">1</span>:<span class="dv">2</span>]
<span class="co">#  An inappropriate &quot;collapse&quot; to a simpler form</span>
InsectSprays[, <span class="dv">1</span>]
<span class="co"># Avoid inappropriate collapse</span>
InsectSprays[, <span class="dv">1</span>, drop=<span class="ot">FALSE</span>]</code></pre></div>
<div id="footer">
	<div style="text-align:center">
		<a href="index.html">Course home page</a>
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
		<a href="mailto:bio708qmee@gmail.com)">Email the profs</a>
		&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
		<a href="logo.html">Logo information</a>
	</div>
</div>
</body>
</html>
